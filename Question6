'''
QUESTION 6: Troubleshooting Multi-Container Stack
ACME Corporation has developed a new version of their multi-container application stack. However, issues have been reported when bringing up all the containers. Using the provided broken images, your task is to troubleshoot, correct the problems, and deploy a fully working stack.
All containers, volumes, and the network must persist after the completion of the task
Configuration
- Network and Volume Setup
    o Create a network called acme-troubleshoot
    o Create the volumes named
         acme-wp-backend-ts
         acme-wp-app-ts
- Database Container: acme-wp-db-ts
    o Use the image: quay.io/myacme/mariadb:latest
    o Container name: acme-wp-db-ts
    o Attach the container to the acme-troubleshoot network.
    o Map the volume acme-wp-backend-ts to /var/lib/mysql inside the container.
- Nginx Container: acme-nginx-ts
    o Use the image: quay.io/myacme/nginx
    o Container name: acme-nginx-ts
    o Attach the container to the acme-troubleshoot network
- WordPress Container: acme-wordpress-ts
    o Container name: acme-wordpress-ts
    o Use the image: quay.io/myacme/wordpress:latest
    o Attach the container to the acme-troubleshoot network.
'''


# SOLUTION

- pwd
- cd /home/student/workspace
- ls -l

# Create network
- podman network create acme-troubleshoot
- podman network ls

# Create volumes
- podman volume create acme-wp-backend-ts
- podman volume create acme-wp-app-ts
- podman volume ls

# Database Container
- podman images
- podman pull quay.io/myacme/mariadb:latest
- podman images | grep mariadb
- podman run -d --name acme-wp-db-ts \
  --network acme-troubleshoot \
  -v acme-wp-backend-ts:/var/lib/mysql:Z \
  quay.io/myacme/mariadb:latest
- podman ps | grep acme-wp-db-ts

# Nginx Container
- podman images
- podman pull quay.io/myacme/nginx
- podman images | grep nginx
- podman run -d --name acme-nginx-ts \
  --network acme-troubleshoot \
  quay.io/myacme/nginx
- podman ps | grep acme-nginx-ts

# WordPress Container
- podman images
- podman pull quay.io/myacme/wordpress:latest
- podman images | grep wordpress
- podman run -d --name acme-wordpress-ts \
  --network acme-troubleshoot \
  quay.io/myacme/wordpress:latest
- podman ps | grep acme-wordpress-ts

# Final verification
- podman ps
- podman network inspect acme-troubleshoot